'use client';import { useState,useEffect } from 'react';import { useRouter } from 'next/navigation';export default function AdminLogin(){const [password,setPassword]=useState('');const [error,setError]=useState(null as any);const router=useRouter();useEffect(()=>{fetch('/api/admin/me').then(r=>r.ok?router.replace('/admin'):null)},[router]);async function onSubmit(){setError(null);const res=await fetch('/api/admin/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password})});if(res.ok) router.replace('/admin'); else {const j=await res.json(); setError(j?.error||'login failed');}}return(<div className='min-h-screen flex items-center justify-center'><div className='card w-full max-w-sm'><h1 className='mb-4 text-center text-2xl font-bold'>Admin Login</h1><input type='password' placeholder='Password' className='input mb-3' value={password} onChange={e=>setPassword(e.target.value)} /><button onClick={onSubmit} className='btn btn-primary w-full'>เข้าสู่ระบบ</button>{error&&<p className='mt-3 text-center text-sm text-red-600'>{String(error)}</p>}</div></div>)}
